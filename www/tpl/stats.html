<!--(set_escape)-->HTML<!--(end)-->
<!DOCTYPE html>
<html>
<head>
<title>Statistics</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<!--(if stale)-->
<p class="error">The data displayed on this page was last updated @!stale!@ ago. To show current data, please type <code>!stats</code> in the Twitch chat, to tell the LRRBot to send the latest data to the web server.</p>
<!--(end)-->
<table id="statstable">
<thead>
<tr>
	<th class="game">Game</th>
	<!--(for statkey,stat in sorted(data['stats'].items(), key=lambda (k,v):-v['total']))-->
		<th class="stat @!statkey!@">@!ucfirst(stat['plural'])!@</th>
	<!--(end)-->
</tr>
</thead>
<tbody>
<!--(for i,game in enumerate(sorted(data['games'].values(), key=lambda game:game['display'].upper())))-->
	<tr class="@!"odd" if i%2 else "even"!@">
		<td class="game">
			<!--(if game['display'] != game['name'])--><span class="alias" title="@!game['name']!@"><!--(end)-->
			@!game['display']!@
			<!--(if game['display'] != game['name'])--></span><!--(end)-->
		</td>
		<!--(for statkey,stat in sorted(data['stats'].items(), key=lambda (k,v):-v['total']))-->
			<td class="stat @!statkey!@">@!game['stats'][statkey]!@</td>
		<!--(end)-->
	</tr>
<!--(end)-->
</tbody>
<tfoot>
<tr>
	<th class="total">Total</th>
	<!--(for statkey,stat in sorted(data['stats'].items(), key=lambda (k,v):-v['total']))-->
		<th class="stat @!statkey!@">@!stat['total']!@</th>
	<!--(end)-->
</tr>
</tfoot>
</table>
<script type="text/javascript" src="js/jquery-1.10.2.js"></script>
<script type="text/javascript" src="js/highcharts.js"></script>
<!--(for statkey,stat in sorted(data['stats'].items(), key=lambda (k,v):-v['total']))-->
<div class="highchart" id="chart-@!statkey!@"></div>
<script type="text/javascript">
$(function () {
	$('#chart-$!statkey!$').highcharts({
		title: {
				text: $!json(ucfirst(stat['plural']))!$
		},
		tooltip: {
			pointFormat: '{series.name}: <b>{point.y}</b><br>Share: <b>{point.percentage:.1f}%</b>'
		},
		plotOptions: {
				pie: {
						allowPointSelect: true,
						cursor: 'pointer',
						dataLabels: {
								enabled: true,
								color: '#000000',
								connectorColor: '#000000',
								format: '<b>{point.name}</b>: {point.y}'
						}
				}
		},
		series: [{
				type: 'pie',
				name: $!json(ucfirst(stat['plural']))!$,
				data: $!json(sorted(((game['display'], game['stats'][statkey]) for game in data['games'].values() if game['stats'][statkey]), key=lambda pt:(-pt[1],pt[0].upper())))!$
		}]
	});
});
</script>
<!--(end)-->
</body>
</html>
